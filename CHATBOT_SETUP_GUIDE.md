# 챗봇 API 설정 가이드 🤖

## 현재 상태

챗봇은 **두 가지 모드**로 작동합니다:

### 1. 간단한 응답 모드 (현재 작동 중)
- ✅ Google Gemini API 키 **없이도** 작동
- ✅ DB에서 실제 제품 정보 조회
- ✅ 가격대별 추천 (가성비/밸런스/고성능)
- ✅ 카테고리별 필터링 (CPU, GPU, RAM, SSD 등)
- ⚠️ AI 분석 및 상세 설명 제한적

### 2. AI 고급 모드 (API 키 필요)
- 🔑 Google Gemini API 키 필요
- ✅ 자연어 이해 및 맥락 파악
- ✅ 상세한 제품 분석 및 비교
- ✅ 사용자 맞춤 추천
- ✅ 리뷰 기반 실사용자 의견 반영

---

## 챗봇 작동 예시

### 간단한 응답 모드 (API 키 없음)

**사용자**: "SSD 추천해줘"

**다오나 응답**:
```
안녕하세요! 다오나입니다. 🤖

**SSD 추천드립니다!**

💰 **가성비 옵션**
• 삼성전자 990 EVO Plus M.2 NVMe (1TB)
  가격: 129,000원
• WD Blue SN580 M.2 NVMe (1TB)
  가격: 89,000원

⚖️ **밸런스 옵션**
• 삼성전자 990 PRO M.2 NVMe (1TB)
  가격: 179,000원
• WD Black SN850X M.2 NVMe (1TB)
  가격: 159,000원

🚀 **고성능 옵션**
• 삼성전자 990 PRO M.2 NVMe (2TB)
  가격: 319,000원
• SK하이닉스 Platinum P51 M.2 NVMe (2TB)
  가격: 399,000원

더 궁금한 점이 있으시면 언제든 물어보세요! 💬
```

### AI 고급 모드 (API 키 설정 시)

**사용자**: "SSD 추천해줘"

**다오나 응답** (AI 분석 포함):
```
안녕하세요! 다오나입니다 🤖

SSD 선택 시 용도와 예산이 중요합니다. 추천드리는 제품들을 확인해보세요!

📌 **추천 1: 삼성전자 990 EVO Plus M.2 NVMe 1TB** (가격: 129,000원)
- **왜 추천?**: 최고의 가성비! PCIe 4.0 지원으로 충분한 성능
- **주요 스펙**: 읽기 5000MB/s / 쓰기 4200MB/s / DRAM 없음
- **적합한 사용자**: 게임용, 일반 작업, 예산이 제한적인 경우
- **사용자 리뷰**: "가격 대비 성능이 훌륭합니다. 게임 로딩이 빨라졌어요!"

📌 **추천 2: 삼성전자 990 PRO M.2 NVMe 1TB** (가격: 179,000원)
- **왜 추천?**: PCIe 4.0 최고 성능, DRAM 탑재로 내구성 우수
- **주요 스펙**: 읽기 7450MB/s / 쓰기 6900MB/s / DRAM 탑재
- **적합한 사용자**: 영상편집, 3D 작업, 고성능이 필요한 경우
- **사용자 리뷰**: "발열도 적고 속도가 정말 빠릅니다. 작업 효율이 올라갔어요."

📌 **추천 3: WD Black SN850X M.2 NVMe 2TB** (가격: 289,000원)
- **왜 추천?**: 대용량 + 고성능, 게임 최적화
- **주요 스펙**: 읽기 7300MB/s / 쓰기 6600MB/s / 2TB 대용량
- **적합한 사용자**: 게임 + 작업 병행, 저장공간이 많이 필요한 경우

💡 **선택 가이드**:
- **예산 우선**: 990 EVO Plus (성능과 가격의 균형)
- **성능 우선**: 990 PRO (최고 속도 + 내구성)
- **대용량 필요**: WD Black SN850X 2TB (게임 + 작업)

더 궁금한 점이 있으시면 언제든 물어보세요! 💬
```

---

## Google Gemini API 키 설정 방법

### 1단계: Google AI Studio에서 API 키 발급

1. [Google AI Studio](https://makersuite.google.com/app/apikey) 접속
2. Google 계정으로 로그인
3. "Get API Key" 또는 "API 키 만들기" 클릭
4. API 키 복사 (예: `AIzaSyAaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPp`)

### 2단계: 환경 변수 설정

#### Windows (PowerShell)

**임시 설정** (현재 터미널 세션에만 적용):
```powershell
$env:GOOGLE_API_KEY="여기에_발급받은_API키_붙여넣기"
```

**영구 설정** (시스템 환경 변수):
1. "시스템 환경 변수 편집" 검색
2. "환경 변수" 버튼 클릭
3. "사용자 변수" 또는 "시스템 변수"에서 "새로 만들기"
4. 변수 이름: `GOOGLE_API_KEY`
5. 변수 값: 발급받은 API 키
6. "확인" 클릭
7. **중요**: PowerShell/CMD 재시작 필요

#### Windows (CMD)

**임시 설정**:
```cmd
set GOOGLE_API_KEY=여기에_발급받은_API키_붙여넣기
```

#### Linux / macOS

**임시 설정**:
```bash
export GOOGLE_API_KEY="여기에_발급받은_API키_붙여넣기"
```

**영구 설정** (`~/.bashrc` 또는 `~/.zshrc`에 추가):
```bash
echo 'export GOOGLE_API_KEY="여기에_발급받은_API키_붙여넣기"' >> ~/.bashrc
source ~/.bashrc
```

### 3단계: 백엔드 서버 재시작

환경 변수 설정 후 백엔드 서버를 재시작해야 적용됩니다:

```bash
# IntelliJ/Eclipse에서 실행 중인 경우
# -> Stop 후 Run 다시 실행

# 터미널에서 실행 중인 경우
cd webservice
./mvnw spring-boot:run
```

### 4단계: 확인

챗봇에 질문을 해보세요:
- "SSD 추천해줘"
- "게임용 CPU 알려줘"
- "100만원 예산으로 PC 맞출 수 있어?"

AI 고급 모드가 작동하면 더 상세하고 자연스러운 답변을 받을 수 있습니다.

---

## 트러블슈팅

### 문제 1: "간단한 응답 모드"만 계속 작동

**증상**:
- 제품 추천은 되지만 상세 분석이 없음
- 짧은 목록 형태의 답변만 받음

**해결**:
1. 환경 변수가 제대로 설정되었는지 확인
   ```powershell
   # PowerShell
   echo $env:GOOGLE_API_KEY
   
   # CMD
   echo %GOOGLE_API_KEY%
   
   # Linux/macOS
   echo $GOOGLE_API_KEY
   ```
2. 백엔드 서버 재시작
3. 백엔드 콘솔 로그 확인: "Gemini API 키가 설정되지 않았습니다" 메시지 확인

### 문제 2: "API 호출 실패" 오류

**증상**:
- API 키는 설정했지만 오류 발생

**해결**:
1. API 키가 올바른지 확인 (복사/붙여넣기 실수)
2. API 키에 공백이나 따옴표가 포함되지 않았는지 확인
3. Google AI Studio에서 API 키 상태 확인 (비활성화 여부)
4. 인터넷 연결 확인

### 문제 3: 데이터베이스에 제품 정보가 없음

**증상**:
- "현재 [카테고리] 제품 정보가 없습니다"

**해결**:
크롤러를 실행하여 제품 데이터를 수집하세요:
```bash
cd [프로젝트 루트]
python crawler.py
# 옵션 0 선택 (기본 정보만 수집)
```

---

## API 요금 정보

### Google Gemini API (무료 할당량)

- **무료 할당량**: 매월 1,500회 요청 (충분함)
- **요금제**: 무료 → $0.0005/요청 (유료 전환 시)
- **제한**: 분당 60회 요청

### 참고

- 간단한 응답 모드는 **완전 무료**입니다
- AI 고급 모드는 API 키가 필요하지만 무료 할당량으로 충분히 사용 가능합니다
- 개인 프로젝트나 테스트 용도로는 비용 걱정 없습니다

---

## 추가 정보

### 챗봇 작동 원리

1. **사용자 질문 분석**
   - 키워드 추출 (CPU, GPU, SSD 등)
   - 카테고리 분류

2. **데이터베이스 검색**
   - 관련 제품 조회 (가격순 정렬)
   - 가격대별 선택 (저가/중가/고가)

3. **응답 생성**
   - **API 키 없음**: 간단한 목록 형태 반환
   - **API 키 있음**: Gemini AI가 상세 분석 및 추천

### 지원되는 질문 유형

- ✅ 부품 추천: "CPU 추천해줘", "그래픽카드 알려줘"
- ✅ 예산별: "100만원으로 뭐 살까?", "저렴한 SSD"
- ✅ 용도별: "게임용 GPU", "영상편집용 RAM"
- ✅ 비교: "RTX 4070 vs 4060", "DDR4 vs DDR5"
- ✅ 일반 질문: "SSD는 몇 GB가 좋아?", "파워 용량은?"

---

## 문의

챗봇 설정 중 문제가 발생하면:
1. 백엔드 콘솔 로그 확인
2. 브라우저 개발자 도구 (F12) 콘솔 확인
3. 환경 변수 설정 재확인

좋은 PC 구성하시길 바랍니다! 🎉

